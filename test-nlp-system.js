/**
 * Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… NLP Ø§Ù„Ù…Ø­Ù„ÙŠ
 */

import { quickFileAnalysis } from './Components/upload/TextAnalyzerEnhanced.js';
import { smartDivideChapters } from './utils/nlp/chapterDivider.js';
import { getTextStats } from './utils/nlp/arabicTokenizer.js';

// Ù†Øµ Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø±Ø¨ÙŠ
const testText = `
Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©

ÙÙŠ ÙŠÙˆÙ… Ù…Ù† Ø§Ù„Ø£ÙŠØ§Ù…ØŒ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø´Ø§Ø¨ Ø§Ø³Ù…Ù‡ Ø£Ø­Ù…Ø¯ ÙŠØ­Ù„Ù… Ø¨Ø£Ù† ÙŠØµØ¨Ø­ ÙƒØ§ØªØ¨Ø§Ù‹ Ù…Ø´Ù‡ÙˆØ±Ø§Ù‹. ÙƒØ§Ù† ÙŠÙ‚Ø¶ÙŠ Ø³Ø§Ø¹Ø§Øª Ø·ÙˆÙŠÙ„Ø© ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø© ÙŠÙ‚Ø±Ø£ ÙƒÙ„ Ù…Ø§ ØªÙ‚Ø¹ Ø¹Ù„ÙŠÙ‡ ÙŠØ¯Ø§Ù‡ Ù…Ù† ÙƒØªØ¨ ÙˆØ±ÙˆØ§ÙŠØ§Øª.

ÙƒØ§Ù†Øª Ø£Ù…Ù†ÙŠØªÙ‡ Ø§Ù„ÙˆØ­ÙŠØ¯Ø© Ø£Ù† ÙŠÙƒØªØ¨ Ù‚ØµØ© ØªÙ„Ù…Ø³ Ù‚Ù„ÙˆØ¨ Ø§Ù„Ù‚Ø±Ø§Ø¡ ÙˆØªØ¨Ù‚Ù‰ ÙÙŠ Ø°Ø§ÙƒØ±ØªÙ‡Ù… Ù„Ù„Ø£Ø¨Ø¯. ÙƒØ§Ù† ÙŠØ¹Ù„Ù… Ø£Ù† Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø·ÙˆÙŠÙ„ ÙˆØµØ¹Ø¨ØŒ ÙˆÙ„ÙƒÙ†Ù‡ Ù„Ù… ÙŠØªÙˆÙ‚Ù Ø¹Ù† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙŠÙˆÙ…Ø§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹.

ÙÙŠ Ø£Ø­Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…ØŒ Ø¨ÙŠÙ†Ù…Ø§ ÙƒØ§Ù† ÙŠØªØµÙØ­ ÙƒØªØ§Ø¨Ø§Ù‹ Ù‚Ø¯ÙŠÙ…Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø©ØŒ ÙˆØ¬Ø¯ Ø¨ÙŠÙ† ØµÙØ­Ø§ØªÙ‡ ÙˆØ±Ù‚Ø© ØµÙØ±Ø§Ø¡ Ù…ÙƒØªÙˆØ¨ Ø¹Ù„ÙŠÙ‡Ø§ Ø¨Ø®Ø· Ø¬Ù…ÙŠÙ„: "Ø§Ù„ÙƒØ§ØªØ¨ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù‡Ùˆ Ù…Ù† ÙŠÙƒØªØ¨ Ø¨Ù‚Ù„Ø¨Ù‡ Ù‚Ø¨Ù„ Ù‚Ù„Ù…Ù‡".

Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„ØªØ­Ø¯ÙŠ

Ù‚Ø±Ø± Ø£Ø­Ù…Ø¯ Ø£Ù† ÙŠØ¨Ø¯Ø£ ÙÙŠ ÙƒØªØ§Ø¨Ø© Ø±ÙˆØ§ÙŠØªÙ‡ Ø§Ù„Ø£ÙˆÙ„Ù‰. Ø§Ø®ØªØ§Ø± Ù…ÙˆØ¶ÙˆØ¹Ø§Ù‹ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù…Ù† Ù‚Ù„Ø¨Ù‡ØŒ Ù‚ØµØ© Ø¹Ù† Ø§Ù„ØµØ¯Ø§Ù‚Ø© ÙˆØ§Ù„ÙˆÙØ§Ø¡ ÙˆØ§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„ØªÙŠ Ù„Ø§ ØªÙ…ÙˆØª.

ÙƒØªØ¨ ÙˆÙƒØªØ¨ Ø­ØªÙ‰ Ù…Ù„Ø£ Ø¹Ø´Ø±Ø§Øª Ø§Ù„ØµÙØ­Ø§Øª. ÙƒØ§Ù† ÙŠØ´Ø¹Ø± Ø¨Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© ÙŠÙ†Ù‡ÙŠ ÙÙŠÙ‡Ø§ ÙØµÙ„Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹. ÙˆÙ„ÙƒÙ† Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø¨Ø¯Ø£ Ø¹Ù†Ø¯Ù…Ø§ Ø£Ø±Ø§Ø¯ Ø£Ù† ÙŠÙ†Ø´Ø± Ø±ÙˆØ§ÙŠØªÙ‡.

Ø±ÙØ¶Øª Ø¯ÙˆØ± Ø§Ù„Ù†Ø´Ø± Ø±ÙˆØ§ÙŠØªÙ‡ Ù…Ø±Ø© Ø¨Ø¹Ø¯ Ø£Ø®Ø±Ù‰. Ù‚Ø§Ù„ÙˆØ§ Ø¥Ù† Ø£Ø³Ù„ÙˆØ¨Ù‡ Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ ØªØ·ÙˆÙŠØ±ØŒ ÙˆØ¥Ù† Ø§Ù„Ù‚ØµØ© ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ù…Ù‚. Ù„ÙƒÙ† Ø£Ø­Ù…Ø¯ Ù„Ù… ÙŠÙŠØ£Ø³.

Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù„Ø«: Ø§Ù„Ù†Ø¬Ø§Ø­

Ø¨Ø¹Ø¯ Ø³Ù†ÙˆØ§Øª Ù…Ù† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±ØŒ Ù†Ø¬Ø­ Ø£Ø­Ù…Ø¯ Ø£Ø®ÙŠØ±Ø§Ù‹ ÙÙŠ Ù†Ø´Ø± Ø±ÙˆØ§ÙŠØªÙ‡. ÙˆÙƒØ§Ù†Øª Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø£ÙØ¶Ù„ Ù…Ù…Ø§ ØªÙˆÙ‚Ø¹. Ø£Ø­Ø¨ Ø§Ù„Ù‚Ø±Ø§Ø¡ Ø§Ù„Ù‚ØµØ© ÙˆØ§Ù†ØªØ´Ø±Øª Ø¨Ø³Ø±Ø¹Ø©.

Ø£ØµØ¨Ø­ Ø£Ø­Ù…Ø¯ ÙƒØ§ØªØ¨Ø§Ù‹ Ù…Ø¹Ø±ÙˆÙØ§Ù‹ØŒ ÙˆØªØ­Ù‚Ù‚ Ø­Ù„Ù…Ù‡ Ø§Ù„Ø°ÙŠ Ø·Ø§Ù„Ù…Ø§ Ø³Ø¹Ù‰ Ø¥Ù„ÙŠÙ‡. Ù„ÙƒÙ†Ù‡ Ù„Ù… ÙŠÙ†Ø³Ù Ø£Ø¨Ø¯Ø§Ù‹ ØªÙ„Ùƒ Ø§Ù„ÙˆØ±Ù‚Ø© Ø§Ù„ØµÙØ±Ø§Ø¡ Ø§Ù„ØªÙŠ ÙˆØ¬Ø¯Ù‡Ø§ ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø©ØŒ ÙˆØ§Ù„ØªÙŠ ØºÙŠØ±Øª Ø­ÙŠØ§ØªÙ‡ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¨Ø¯.

Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
`;

console.log('ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… NLP Ø§Ù„Ù…Ø­Ù„ÙŠ\n');
console.log('=' .repeat(50));

// Ø§Ø®ØªØ¨Ø§Ø± 1: Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Øµ
console.log('\nğŸ“Š Ø§Ø®ØªØ¨Ø§Ø± 1: Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Øµ');
const stats = getTextStats(testText);
console.log('Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª:', stats.words);
console.log('Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ù…Ù„:', stats.sentences);
console.log('Ø¹Ø¯Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Øª:', stats.paragraphs);
console.log('Ù…ØªÙˆØ³Ø· Ø§Ù„ÙƒÙ„Ù…Ø§Øª/Ø¬Ù…Ù„Ø©:', stats.avgWordsPerSentence.toFixed(1));
console.log('Ø«Ø±Ø§Ø¡ Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª:', (stats.vocabularyRichness * 100).toFixed(1) + '%');

// Ø§Ø®ØªØ¨Ø§Ø± 2: ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ÙØµÙˆÙ„
console.log('\nğŸ“– Ø§Ø®ØªØ¨Ø§Ø± 2: ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ø°ÙƒÙŠ');
const chapters = smartDivideChapters(testText);
console.log('Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©:', chapters.method);
console.log('Ø¹Ø¯Ø¯ Ø§Ù„ÙØµÙˆÙ„:', chapters.chapters?.length || chapters.actualChapters);
console.log('Ø§Ù„ÙØµÙˆÙ„:');
chapters.chapters.forEach(ch => {
  console.log(`  - ${ch.title} (${ch.words || 'N/A'} ÙƒÙ„Ù…Ø©)`);
});

// Ø§Ø®ØªØ¨Ø§Ø± 3: ØªØ­Ù„ÙŠÙ„ Ø³Ø±ÙŠØ¹
console.log('\nâš¡ Ø§Ø®ØªØ¨Ø§Ø± 3: ØªØ­Ù„ÙŠÙ„ Ø³Ø±ÙŠØ¹');
quickFileAnalysis(testText).then(analysis => {
  console.log('Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª:', analysis.word_count);
  console.log('Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©:', analysis.estimated_pages);
  console.log('Ø§Ù„Ù„ØºØ©:', analysis.language);
  console.log('ÙØµÙˆÙ„ Ù…ÙƒØªØ´ÙØ©:', analysis.detected_chapters);
  console.log('Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰:', analysis.content_type);
  console.log('Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙƒØ±Ø§Ø±:', analysis.repetition_rate + '%');
  
  console.log('\nâœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙ…Øª Ø¨Ù†Ø¬Ø§Ø­!');
}).catch(err => {
  console.error('âŒ Ø®Ø·Ø£:', err.message);
});
